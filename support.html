<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hỗ trợ khách hàng</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="sidebar">
        <h2>HomeStay</h2>
        <ul>
            <li><a href="admin.html"> ADMIN</a></li>
            <li><a href="adminDashboard.html"> Dashboard</a></li>
            <li><a href="adminBooking.html"> Quản lý Booking</a></li>
            <li><a href="adminUser.html"> Quản lý Người dùng</a></li>
            <li><a href="rooms.html"> Quản lý phòng</a></li>
            <li><a href="payment.html"> Quản lý thanh toán</a></li>
            <li><a href="review.html"> Phản hồi đánh giá</a></li>
            <li><a href="support.html"> Hỗ trợ khách hàng</a></li>
            <li><a href="login.html"> Đăng xuất</a></li>
        </ul>
    </div>
    <div class="main">
        <div class="header">
            <h1>Hỗ trợ khách hàng</h1>
            <button class="btn" onclick="showAddSupportForm()">Thêm yêu cầu hỗ trợ</button>
        </div>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Khách hàng</th>
                        <th>Email</th>
                        <th>Tiêu đề</th>
                        <th>Nội dung</th>
                        <th>Ngày gửi</th>
                        <th>Trạng thái</th>
                        <th>Phản hồi của admin</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Nguyễn Văn A</td>
                        <td>vana@example.com</td>
                        <td>Không nhận được xác nhận booking</td>
                        <td>Tôi đã đặt phòng nhưng chưa nhận được xác nhận.</td>
                        <td>2025-08-28</td>
                        <td>Đang xử lý</td>
                        <td>Chúng tôi sẽ kiểm tra và phản hồi sớm nhất.</td>
                        <td>
                            <button class="btn" onclick="showReplySupportForm(1)">Phản hồi</button>
                            <button class="btn" onclick="deleteSupport(1)">Xóa</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Trần Thị B</td>
                        <td>thib@example.com</td>
                        <td>Vấn đề thanh toán</td>
                        <td>Thanh toán bị lỗi, không hoàn tất.</td>
                        <td>2025-08-27</td>
                        <td>Đã phản hồi</td>
                        <td>Vui lòng kiểm tra lại thông tin thẻ hoặc liên hệ ngân hàng.</td>
                        <td>
                            <button class="btn" onclick="showReplySupportForm(2)">Phản hồi</button>
                            <button class="btn" onclick="deleteSupport(2)">Xóa</button>
                        </td>
                    </tr>
                    <!-- Thêm các dòng hỗ trợ khác tại đây -->
                </tbody>
            </table>
        </div>
        <!-- Form thêm/sửa yêu cầu hỗ trợ -->
        <div id="supportForm" style="display:none; background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.05); margin-top:20px;">
            <h3 id="formTitle">Thêm yêu cầu hỗ trợ</h3>
            <form id="formSupport" onsubmit="saveSupport(event)">
                <input type="hidden" id="supportId">
                <div class="mb-3">
                    <label>Khách hàng</label>
                    <input type="text" class="form-control" id="supportCustomer" required>
                </div>
                <div class="mb-3">
                    <label>Email</label>
                    <input type="email" class="form-control" id="supportEmail" required>
                </div>
                <div class="mb-3">
                    <label>Tiêu đề</label>
                    <input type="text" class="form-control" id="supportTitle" required>
                </div>
                <div class="mb-3">
                    <label>Nội dung</label>
                    <textarea class="form-control" id="supportContent" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn">Gửi yêu cầu</button>
                <button type="button" class="btn" onclick="hideSupportForm()">Hủy</button>
            </form>
        </div>
        <!-- Form phản hồi hỗ trợ -->
        <div id="replySupportForm" style="display:none; background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.05); margin-top:20px;">
            <h3 id="replySupportTitle">Phản hồi yêu cầu hỗ trợ</h3>
            <form id="formReplySupport" onsubmit="saveReplySupport(event)">
                <input type="hidden" id="replySupportId">
                <div class="mb-3">
                    <label>Nội dung phản hồi</label>
                    <textarea class="form-control" id="replySupportContent" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn">Gửi phản hồi</button>
                <button type="button" class="btn" onclick="hideReplySupportForm()">Hủy</button>
            </form>
        </div>
    </div>
    <script>
        function showAddSupportForm() {
            document.getElementById('formTitle').innerText = 'Thêm yêu cầu hỗ trợ';
            document.getElementById('supportForm').style.display = 'block';
            document.getElementById('formSupport').reset();
            document.getElementById('supportId').value = '';
        }
        function hideSupportForm() {
            document.getElementById('supportForm').style.display = 'none';
        }
        function showReplySupportForm(id) {
            document.getElementById('replySupportTitle').innerText = 'Phản hồi yêu cầu #' + id;
            document.getElementById('replySupportForm').style.display = 'block';
            document.getElementById('formReplySupport').reset();
            document.getElementById('replySupportId').value = id;
        }
        function hideReplySupportForm() {
            document.getElementById('replySupportForm').style.display = 'none';
        }
        function deleteSupport(id) {
            if (confirm('Bạn có chắc muốn xóa yêu cầu hỗ trợ #' + id + '?')) {
                // TODO: Xử lý xóa yêu cầu ở backend
            }
        }
        function saveSupport(event) {
            event.preventDefault();
            // TODO: Xử lý lưu yêu cầu hỗ trợ ở backend
            hideSupportForm();
        }
        function saveReplySupport(event) {
            event.preventDefault();
            // TODO: Xử lý lưu phản hồi hỗ trợ ở backend
            hideReplySupportForm();
        }
    </script>
</body>
</html>